Lab: Implementing Load Balancing with Spanning Tree1. Background & ScenarioThis lab was originally designed to implement Multiple Spanning Tree (MST) to optimize switch CPU and memory while providing unique topologies for different VLANs. Due to software limitations in the simulation environment (Packet Tracer), the lab was successfully completed using Rapid Per-VLAN Spanning Tree (Rapid-PVST).The core objective remained the same: Traffic Engineering. We manipulated the Spanning Tree Protocol (STP) to ensure that VLAN 1 and VLAN 2 use different physical paths, maximizing bandwidth utilization and providing redundancy.2. Topology & ConnectivityThe network consists of a "triangle" topology with redundant links between the distribution layer and the access layer.D1 & D2: Cisco 3560 Multilayer Switches (Distribution Layer)A1: Cisco 3560 Multilayer Switch (Access Layer)PC3: Endpoint for connectivity testingCabling TableFromPortToPortCable TypeD1Gig0/1D2Gig0/1Copper Cross-OverD1Fast0/1A1Fast0/1Copper Cross-OverD1Fast0/2A1Fast0/2Copper Cross-OverD2Fast0/3A1Fast0/3Copper Cross-OverD2Fast0/4A1Fast0/4Copper Cross-Over3. Configuration HighlightsRoot Bridge SelectionTo create an "Active/Active" load-balancing environment, we manually assigned Root Bridge priorities for different VLANs.D1: Configured as the Primary Root for VLAN 1 and Secondary Root for VLAN 2.D2: Configured as the Primary Root for VLAN 2 and Secondary Root for VLAN 1.Traffic Engineering (Path Manipulation)We demonstrated two methods for influencing path selection on the Access Switch (A1):Port Cost (VLAN 1):On A1, the cost of interface Fa0/2 was reduced to 10 (default is 19). This forced A1 to select Fa0/2 as the Root Port for VLAN 1, bypassing the standard selection logic.Port Priority (VLAN 2):On D2, the port priority for interface Fa0/4 was lowered to 64 (default is 128). This "tie-breaker" caused A1 to prefer the link connected to its Fa0/4 port for VLAN 2 traffic.4. Verification ResultsThe final state of the network shows successful convergence and traffic separation:VLANRoot BridgeA1 Root PortStatusVLAN 1D1Fa0/2Forwarding (Cost 10)VLAN 2D2Fa0/4Forwarding (Priority 64)5. Lessons LearnedHardware/Software Awareness: Encountered "Invalid input" errors for MST commands, identifying that certain Packet Tracer models or versions lack MST support.Protocol Adaptation: Successfully pivoted from MST to Rapid-PVST while maintaining the same logical outcomes for traffic flow.STP Priority vs. Cost: Confirmed that Cost is a local configuration on the receiving switch, while Port Priority is configured on the upstream (sending) switch.
